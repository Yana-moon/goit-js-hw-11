{"mappings":"AACA,MAQMA,EAAcC,SAASC,cAAc,gBACrCC,EAAcF,SAASC,cAAc,YACrCE,EAAUH,SAASC,cAAc,cAEvC,IAAIG,EAAU,EAEd,IAAIC,EAAY,EACZC,EAAW,GA6CfC,eAAeC,IACb,MAAMC,EAAWV,EAAYW,SAASC,YAAYC,MAAMC,OAClDC,QAxBRP,eAAyBE,GACvB,IAaE,aAZsBM,MAAM,CAC1BC,IAAK,0BACLC,OAAQ,CACNC,IA3CO,qCA4CPC,EAAGV,EACHW,WAAY,QACZC,YAAa,aACbC,YAAY,EACZC,SAnCS,GAoCTC,KAAMpB,MAGKqB,I,CACf,MAAOC,GACPC,IACAC,QAAQF,MAAMA,E,EAOOG,CAAUpB,GACjCJ,EAAYS,EAASgB,UACrB,MAAMC,EAAc,GACpB,IAAK,MAAMC,aACTA,EAAYC,cACZA,EAAaC,KACbA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,KACGxB,EAASyB,KACZR,EAAYS,KAAK,C,aACfR,E,cACAC,E,KACAC,E,MACAC,E,MACAC,E,SACAC,E,UACAC,IAGJ,OAAOP,C,CAITxB,eAAekC,IACb,MACMC,SADoBlC,KAEvBmC,KACCC,GAAW,8CACmBA,EAAQX,8FAEFW,EAAQZ,sBAAsBY,EAAQV,2GAIlCU,EAAQT,+DACRS,EAAQR,kEACLQ,EAAQP,sEACPO,EAAQN,8EAOrDO,KAAK,IACR3C,EAAY4C,mBAAmB,YAAaJ,E,CAsB9C,SAASf,IACPoB,SAASC,OAAOC,QAAQ,2E,CAnH1BlD,EAAYmD,iBAAiB,UAAU3C,MAAM4C,IAC3CA,EAAEC,iBACFjD,EAAQkD,UAAUC,IAAI,mBACtBlD,EAAU,EACVF,EAAYqD,wBACNd,IACNb,QAAQ4B,IAAInD,GACRoD,OAAOpD,GAAa,IACtBF,EAAQkD,UAAUK,OAAO,mBACzBX,SAASC,OAAOW,QAAQ,qBAAqBtD,eACd,IAAtBoD,OAAOpD,GAChB0C,SAASC,OAAOW,QAAQ,qBAAqBtD,cACxCsB,IAqFPrB,EAAW,IAAIsD,eAAe,aAAc,CAC1CC,aAAc,MACdC,aAAc,KAtFC,IAInB3D,EAAQ+C,iBAAiB,SAuFzB3C,iBACEH,GAAW,EACPA,EAAUC,EA/GC,KA4Hf0C,SAASC,OAAOe,KAAK,8DAXnB5D,EAAQkD,UAAUC,IAAI,0BAElBb,IACNnC,EAAS0D,S","sources":["src/index.js"],"sourcesContent":["\nconst userId = '33912044-22b2651672bec86fc9e274e80';\nconst requestUrl = 'https://pixabay.com/api';\n\nconst emptyRequest =\n  'Sorry, there are no images matching your search query. Please try again.';\nconst endOfRequest =\n  \"We're sorry, but you've reached the end of search results.\";\n\nconst formRequest = document.querySelector('#search-form');\nconst galleryDesk = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-more');\n\nlet numPage = 1;\nconst per_page = 40;\nlet totalHits = 0;\nlet lightbox = '';\n\n\nformRequest.addEventListener('submit', async e => {\n  e.preventDefault();\n  loadBtn.classList.add('visually-hidden');\n  numPage = 1;\n  galleryDesk.replaceChildren();\n  await createCardImage();\n  console.log(totalHits);\n  if (Number(totalHits) > 40) {\n    loadBtn.classList.remove('visually-hidden');\n    Notiflix.Notify.success(`'Hooray! We found ${totalHits} images.'`);\n  } else if (Number(totalHits) !== 0) {\n    Notiflix.Notify.success(`'Hooray! We found ${totalHits} images.'`);\n  } else emptyMessage();\n  galleryLightBox();\n});\n\n\nloadBtn.addEventListener('click', addMarkupImages);\n\n//////////// Запрос на бекенд///////////////\nasync function getImages(findText) {\n  try {\n    const request = await axios({\n      url: `${requestUrl}`,\n      params: {\n        key: userId,\n        q: findText,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: per_page,\n        page: numPage,\n      },\n    });\n    return request.data;\n  } catch (error) {\n    emptyMessage();\n    console.error(error);\n  }\n}\n\n\nasync function createMarkupImages() {\n  const findText = formRequest.elements.searchQuery.value.trim();\n  const response = await getImages(findText);\n  totalHits = response.totalHits;\n  const arrayImages = [];\n  for (const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } of response.hits) {\n    arrayImages.push({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    });\n  }\n  return arrayImages;\n}\n\n\nasync function createCardImage() {\n  const arrayImages = await createMarkupImages();\n  const markup = arrayImages\n    .map(\n      arrItem => `       \n      <a class=\"image-link\" href=\"${arrItem.largeImageURL}\">\n        <div class=\"photo-card\">\n        <img class=\"gallery-image\" src=\"${arrItem.webformatURL}\" alt=\"${arrItem.tags}\" loading=\"lazy\"/>\n        \n<div class=\"info\">\n<ul>\n<li><p class=\"info-item\"><b>Likes</b></p><p>${arrItem.likes}</p></li>\n<li><p class=\"info-item\"><b>Views</b></p><p>${arrItem.views}</p></li>\n<li><p class=\"info-item\"><b>Comments</b></p><p>${arrItem.comments}</p></li>\n<li><p class=\"info-item\"><b>Downloads</b></p><p>${arrItem.downloads}</p></li>\n</ul>\n</div>\n        </div>\n        </a>\n        `\n    )\n    .join('');\n  galleryDesk.insertAdjacentHTML('beforeend', markup);\n}\n\n\nfunction galleryLightBox() {\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\n\nasync function addMarkupImages() {\n  numPage += 1;\n  if (numPage > totalHits / per_page) {\n    endMessage();\n    loadBtn.classList.add('visually-hidden');\n  }\n  await createCardImage();\n  lightbox.refresh();\n}\n\nfunction emptyMessage() {\n  Notiflix.Notify.failure(`${emptyRequest}`);\n}\n\nfunction endMessage() {\n  Notiflix.Notify.info(`${endOfRequest}`);\n}"],"names":["$1f0dc3b9307be026$var$formRequest","document","querySelector","$1f0dc3b9307be026$var$galleryDesk","$1f0dc3b9307be026$var$loadBtn","$1f0dc3b9307be026$var$numPage","$1f0dc3b9307be026$var$totalHits","$1f0dc3b9307be026$var$lightbox","async","$1f0dc3b9307be026$var$createMarkupImages","findText","elements","searchQuery","value","trim","response","axios","url","params","key","q","image_type","orientation","safesearch","per_page","page","data","error","$1f0dc3b9307be026$var$emptyMessage","console","$1f0dc3b9307be026$var$getImages","totalHits","arrayImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","hits","push","$1f0dc3b9307be026$var$createCardImage","markup","map","arrItem","join","insertAdjacentHTML","Notiflix","Notify","failure","addEventListener","e","preventDefault","classList","add","replaceChildren","log","Number","remove","success","SimpleLightbox","captionsData","captionDelay","info","refresh"],"version":3,"file":"index.24dc37ff.js.map"}