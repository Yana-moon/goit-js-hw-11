{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAUA,IAAIC,EAAO,EAEPC,EAAc,GACdC,EAAY,EACZC,EAAW,GAEfC,eAAeC,IACf,MAAMC,QAAiBC,EAAAC,QAAMC,IACzB,qEAAiCR,uCAA0DD,4CAI/F,OAFAE,EAAYI,EAASI,KAAKC,UA+H1BX,GAAQ,EA7HDM,EAASI,KAAKE,I,CAKrB,MAAMC,EAAaC,SAASC,cAAc,gBACpCC,EAAUF,SAASC,cAAc,YACjCE,EAAcH,SAASC,cAAc,cACrCG,EAAYJ,SAASC,cAAc,WACnCI,EAAQL,SAASC,cAAc,wBAOrC,SAASK,EAAaC,GACP,OAAXA,EAAEX,OACFQ,EAAUI,UAAW,E,CAKzB,SAASC,EAAYF,GAE4C,IAA7DA,EAAEG,cAAcC,SAASC,YAAYC,MAAMC,OAAOC,SAClDX,EAAUI,UAAW,E,CAIzB,SAASQ,IACTZ,EAAUI,UAAW,C,CAmBrBlB,eAAe2B,IACf,IA6FAd,EAAYK,UAAW,EACvBL,EAAYe,YAAc,aA3FtB,MAAMC,QAAe5B,IACf6B,QAAeD,EAAOE,QAC5B,CAACC,EAAQC,IAqCb,UAAsBC,cACtBA,EAAaC,aACbA,EAAYC,KACZA,EAAIC,MACJA,EAAKC,MACLA,EAAKC,SACLA,EAAQC,UACRA,IAEA,MAAO,cACIN,4CAECC,WAAsBC,0FAGdC,6DAGAC,gEAGGC,iEAGCC,mC,CA7DDC,CAAaR,GAASD,GACzC,IA2B2BA,EAxBLF,EAyB1BlB,EAAQ8B,mBAAmB,YAAaV,GAgDxCjC,EAAW,IAAI4C,EAAAjD,GAAJ,CAAmB,aAAc,CACxCkD,aAAc,MACdC,aAAc,MA1Ed9C,EAAS+C,UAELhD,EA1EO,IA0EiBF,EAAO,GAAM,IACzC,EAAAmD,EAAA3C,WAGAS,EAAYmC,UAAUC,OAAO,aAkFjCpC,EAAYK,UAAW,EACvBL,EAAYe,YAAc,YAhFJ,IAAd9B,GACJe,EAAYmC,UAAUE,IAAI,aAC1BP,EAAAQ,GAASC,OAAOC,QACZ,6EAEOvD,EAAY,GAAKF,EAAO,GAAM,GAgExB0D,EA/DLxD,EAgEhB6C,EAAAQ,GAASC,OAAOG,QAAQ,oBAAoBD,aA/DxCE,KACOA,G,CACT,MAAOC,GACL,OAAOC,QAAQC,MAAMF,E,CA2DzB,IAAqBH,EAvDUtB,C,CAqE/B,SAASwB,IACL1D,EArKW,GAqKYF,EAAO,IAC9BiB,EAAYmC,UAAUE,IAAI,aAC1BP,EAAAQ,GAASC,OAAOG,QAChB,8D,CAlJJ9C,EAAWmD,iBAAiB,UAuB5B5D,eAAwBiB,GACxBA,EAAE4C,iBAEF,MAAMC,EAAO7C,EAAEG,cACTG,EAAQuC,EAAKzC,SAASC,YAAYC,MAAMC,OAC9C3B,EAAc0B,EAEdJ,EAAYF,GACZD,EAAaC,GAuFbrB,EAAO,EAvCPgB,EAAQmD,UAAY,SA5CdpC,IAAcqC,SAAQ,IAAMF,EAAKG,UACvCvC,G,IAnCAb,EAAY+C,iBAAiB,QAASjC,GACtClB,EAAWmD,iBAAiB,QAASzC,EAAaO,GAClDX,EAAM6C,iBAAiB,QAAS5C","sources":["src/index.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport Notiflix from 'notiflix';\nimport axios from 'axios';\nimport scrollBy from './scrollBy.js';\n\n// ======================================\n\nconst API_KEY = '33912044-22b2651672bec86fc9e274e80';\nconst BASE_URL = 'https://pixabay.com/api';\nlet page = 1;\nlet per_page = 40;\nlet searchQuery = '';\nlet totalHits = 0;\nlet lightbox = '';\n\nasync function searchImage() {\nconst response = await axios.get(\n    `${BASE_URL}/?key=${API_KEY}&q=${searchQuery}&image_type=photo&per_page=${per_page}&page=${page}&orientation=horizontal&safesearch=true`\n);\ntotalHits = response.data.totalHits;\nnextPage();\nreturn response.data.hits;\n}\n\n// =========================================\n\nconst searchForm = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst submitBtn = document.querySelector('.submit');\nconst input = document.querySelector('#search-form > input');\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', fetchImages);\nsearchForm.addEventListener('input', onSabmitBtn, ofSabmitBtn);\ninput.addEventListener('input', invalidInput);\n\nfunction invalidInput(e) {\nif (e.data === null) {\n    submitBtn.disabled = true;\n}\nreturn;\n}\n\nfunction onSabmitBtn(e) {\n  // console.log(e.currentTarget.elements.searchQuery.value);\nif (e.currentTarget.elements.searchQuery.value.trim().length !== 0) {\n    submitBtn.disabled = false;\n}\n}\n\nfunction ofSabmitBtn() {\nsubmitBtn.disabled = true;\n}\n\nasync function onSearch(e) {\ne.preventDefault();\n\nconst form = e.currentTarget;\nconst value = form.elements.searchQuery.value.trim();\nsearchQuery = value;\n\nonSabmitBtn(e);\ninvalidInput(e);\nresetPage();\nclearGallery();\n\nawait fetchImages().finally(() => form.reset());\nofSabmitBtn();\n}\n\nasync function fetchImages() {\ntry {\n    loadMoreBtnDisabled();\n\n    const images = await searchImage();\n    const markup = await images.reduce(\n    (markup, image) => createMarkup(image) + markup,\n    ''\n    );\n\n    appendImagesToGallery(markup);\n    lightbox.refresh();\n\n    if (totalHits > per_page && page - 1 !== 1) {\n    scrollBy();\n    }\n\n    loadMoreBtn.classList.remove('is-hidden');\n    loadMoreBtnEnabled();\n\n    if (totalHits === 0) {\n    loadMoreBtn.classList.add('is-hidden');\n    Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n    );\n    } else if (totalHits > 0 && page - 1 === 1) {\n    totalImages(totalHits);\n    galleryEndInfo();\n    } else galleryEndInfo();\n} catch (err) {\n    return console.error(err);\n}\n}\n\nfunction appendImagesToGallery(markup) {\ngallery.insertAdjacentHTML('beforeend', markup);\nlightBox();\n}\n\nfunction clearGallery() {\ngallery.innerHTML = '';\n}\n\nfunction createMarkup({\nlargeImageURL,\nwebformatURL,\ntags,\nlikes,\nviews,\ncomments,\ndownloads,\n}) {\nreturn `\n<a href=\"${largeImageURL}\">\n<div class=\"photo-card\">\n<img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n<div class=\"info\">\n    <p class=\"info-item\">\n    <b>Likes: </b>${likes}\n    </p>\n    <p class=\"info-item\">\n    <b>Views: </b>${views}\n    </p>\n    <p class=\"info-item\">\n    <b>Comments: </b>${comments}\n    </p>\n    <p class=\"info-item\">\n    <b>Downloads: </b>${downloads}\n    </p>\n</div>\n</div></a>\n`;\n}\n\nfunction nextPage() {\npage += 1;\n}\n\nfunction resetPage() {\npage = 1;\n}\n\nfunction lightBox() {\nlightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n}\n\nfunction totalImages(totalHits) {\nNotiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n}\n\nfunction loadMoreBtnDisabled() {\nloadMoreBtn.disabled = true;\nloadMoreBtn.textContent = 'Loading...';\n}\n\nfunction loadMoreBtnEnabled() {\nloadMoreBtn.disabled = false;\nloadMoreBtn.textContent = 'Load more';\n}\n\nfunction galleryEndInfo() {\nif (totalHits / per_page < page - 1) {\n    loadMoreBtn.classList.add('is-hidden');\n    Notiflix.Notify.success(\n    \"We're sorry, but you've reached the end of search results.\"\n    );\n}\n}"],"names":["$fZKcF","parcelRequire","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$searchQuery","$1f0dc3b9307be026$var$totalHits","$1f0dc3b9307be026$var$lightbox","async","$1f0dc3b9307be026$var$searchImage","response","$2shzp","default","get","data","totalHits","hits","$1f0dc3b9307be026$var$searchForm","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$loadMoreBtn","$1f0dc3b9307be026$var$submitBtn","$1f0dc3b9307be026$var$input","$1f0dc3b9307be026$var$invalidInput","e","disabled","$1f0dc3b9307be026$var$onSabmitBtn","currentTarget","elements","searchQuery","value","trim","length","$1f0dc3b9307be026$var$ofSabmitBtn","$1f0dc3b9307be026$var$fetchImages","textContent","images","markup1","reduce","markup","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","$1f0dc3b9307be026$var$createMarkup","insertAdjacentHTML","$parcel$interopDefault","captionsData","captionDelay","refresh","$9enWy","classList","remove","add","$7Y9D8","Notify","failure","totalHits1","success","$1f0dc3b9307be026$var$galleryEndInfo","err","console","error","addEventListener","preventDefault","form","innerHTML","finally","reset"],"version":3,"file":"load-more.29a4461e.js.map"}